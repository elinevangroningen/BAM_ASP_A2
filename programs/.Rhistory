remove(list=ls())
library(plyr)
library(stargazer)
library(ggplot2)
knitr::opts_chunk$set(warning = FALSE, message = FALSE,
comment = "", fig.height=2, fig.width=4, fig.align = "center")
library(tidyverse)
library(stargazer)
library(dagitty)
library(gridExtra)
library(tinytex)
library(stargazer)
IV_dataset <- read.csv("C:/Users/ppria/Documents/BAM_ASP_A2/data/IV_dataset.csv")
View(IV_dataset)
setwd("C:\Users\ppria\Documents\BAM_ASP_A2\data")
setwd("C:/Users/ppria/Documents/BAM_ASP_A2/data")
da.IV <- read.csv("IV_dataset.csv",header = TRUE)
da.IV <- read.csv("IV_dataset.csv",header = TRUE)
setwd("C:/Users/ppria/Documents/BAM_ASP_A2/data")
da.IV <- read.csv("IV_dataset.csv",header = TRUE)
da.IV <- read.csv("IV_dataset.csv", header = TRUE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE,
comment = "", fig.height=2, fig.width=4, fig.align = "center")
setwd("C:/Users/ppria/Documents/BAM_ASP_A2/data")
da.IV <- read.csv("IV_dataset.csv", header = TRUE)
dirProg <- paste0(dir, "Programs/")
dir <-("C:/Users/ppria/Documents/BAM_ASP_A2/data")
dirProg <- paste0(dir, "Programs/")
dirProg
dirData <- paste0(dir, "Data/")
dirData
da.IV <- read.table(file=paste0(dir, "IV_dataset.csv"))
da.IV <- read.table(file=paste0(dirData, "IV_dataset.csv"))
read.csv("C:/Users/ppria/Documents/BAM_ASP_A2/data/IV_dataset.csv", header = TRUE)
da.IV <- read.csv("IV_dataset.csv", header = TRUE)
da.IV <- "IV_dataset.csv"
da.IV <- subset(da.IV,select = c("age","educ","lnwage","married","qob","SMSA","yob"))
View("IV_dataset.csv")
dir <- "C:\Users\ppria\Documents\BAM_ASP_A2\data\"
dir <- "C:/Users/ppria/Documents/BAM_ASP_A2/data/"
da.IV <- read.table(file=paste0(dir, "IV_dataset.csv"))
da.IV <- subset(da.IV,select = c("age","educ","lnwage","married","qob","SMSA","yob"))
da.IV <- read.table(file=paste0(dir, "IV_dataset.csv", header=TRUE))
da.IV <- read.table(file=paste0(dir, "IV_dataset.csv"), header=TRUE)
da.IV <- subset(da.IV,select = c("age","educ","lnwage","married","qob","SMSA","yob"))
View(da.IV)
View(da.IV)
View(da.IV)
setwd("C:/Users/ppria/Documents/BAM_ASP_A2/data/")
setwd("C:/Users/ppria/Documents/BAM_ASP_A2/data/")
da.IV <- read.csv("IV_dataset.csv", header = TRUE)
dir <- "C:/Users/ppria/Documents/BAM_ASP_A2/data/"
da.IV <- read.table(file=paste0(dir, "IV_dataset.csv"), header=TRUE)
da.IV <- read.csv(file=paste0(dir, "IV_dataset.csv"), header=TRUE)
da.IV <- subset(da.IV,select = c("age","educ","lnwage","married","qob","SMSA","yob"))
View(da.IV)
View(da.IV)
rslt2SLS.A <- ivreg(lnwage ~ educ | qob , data=da.IV)
library(plyr)
library(stargazer)
library(ggplot2)
rslt2SLS.A <- ivreg(lnwage ~ educ | qob , data=da.IV)
install.packages("ivpack")
library(ivpack)
rslt2SLS.A <- ivreg(lnwage ~ educ | qob , data=da.IV)
summary(rslt2SLS.A)
stargazer(rslt2SLS.A, type= "text")
stargazer(rslt2SLS.A, type= "text")
rslt2SLS.A <- ivreg(lnwage ~ educ + married + SMSA | married + SMSA + qob , data=da.IV)
stargazer(rslt2SLS.A, type= "text")
modelIV <- ivreg(lnwage ~ educ + married + SMSA | married + SMSA + qob , data=da.IV)
summary(modelIV)
seBasic  <- sqrt(diag(vcov(modelIV)))
seWhite  <- sqrt(diag(vcovHC(modelIV , type="HC0")))
stargazer(modelIV , modelIV ,align=TRUE , no.space=TRUE ,intercept.bottom = FALSE ,se = list(seBasic , seWhite))
summary(modelIV , modelIV ,align=TRUE , no.space=TRUE ,intercept.bottom = FALSE ,se = list(seBasic , seWhite))
knitr::opts_chunk$set(warning = FALSE, message = FALSE,
comment = "", fig.height=2, fig.width=4, fig.align = "center")
dir <- "C:/Users/eline/Documents/BAM/blok1/ASP/BAM_ASP_A2/"
# Load csv and generate subset containing only variables for interest
da.IV <- read.csv(file=paste0(dir, "data/IV_dataset.csv"), header=TRUE)
da.IV_sub <- subset(da.IV,select = c("age", "educ", "lnwage", "married", "qob",
"SMSA", "yob"))
# Convert to factor variables
da.IV_sub$married <- as.factor(da.IV_sub$married)
da.IV_sub$qob <- as.factor(da.IV_sub$qob)
da.IV_sub$SMSA <- as.factor(da.IV_sub$SMSA)
da.IV_sub$yob <- as.factor(da.IV_sub$yob)
# Convert to factor variables
da.IV$married <- as.factor(da.IV$married)
da.IV$qob <- as.factor(da.IV$qob)
da.IV$SMSA <- as.factor(da.IV$SMSA)
da.IV$yob <- as.factor(da.IV$yob)
# To change those variables which should be factor variables into factor variables
g1.1 <- ggplot(data = da.IV, aes(qob, educ)) +
geom_point(size = 0.5) +
geom_smooth(method = "lm", color = "blue", alpha = 0.2)  +
theme_bw() +
labs(caption = "Figure 2.1") +
geom_boxplot() +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold")) +
labs(x = "Quarter of Birth", y = "Education(in years)")
# Load libraries
library(tidyverse)
library(stargazer)
library(dagitty)
library(gridExtra)
library(tinytex)
library(stargazer)
library(AER)
library(ivpack)
g1.1 <- ggplot(data = da.IV, aes(qob, educ)) +
geom_point(size = 0.5) +
geom_smooth(method = "lm", color = "blue", alpha = 0.2)  +
theme_bw() +
labs(caption = "Figure 2.1") +
geom_boxplot() +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold")) +
labs(x = "Quarter of Birth", y = "Education(in years)")
g1.1
g1.1 <- ggplot(data = da.IV, aes(qob, educ)) +
geom_point(size = 0.5) +
geom_smooth(method = "lm", color = "blue", alpha = 0.2)  +
theme_bw() +
labs(caption = "Figure 2.1") +
geom_boxplot() +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold")) +
labs(x = "Quarter of Birth", y = "Education(in years)")
g1.1
rsltIV <- ivreg(lnwage ~ educ|qob,data = da.IV)
summary(rsltIV, diagnostics = TRUE)
stargazer(da.IV,type = "text")
summary(as.factor(da.IV$married))
knitr::opts_chunk$set(warning = FALSE, message = FALSE,
comment = "", fig.height=2, fig.width=4, fig.align = "center")
library(tidyverse)
library(stargazer)
library(dagitty)
library(gridExtra)
library(tinytex)
library(ggplot2)
library(tidyr)
dir <- "/Users/valeriemaasdamme/Documents/BAM_ASP_A2"
dirProg <- paste0(dir, "/programs/")
dirData <- paste0(dir, "/Data/")
dfDiD <- read.csv(file=paste0(dirData, "DiD_dataset.csv"))
str(dfDiD) #all variable are numeric or integer, no need to tranform
dfDiD$dPeriod = ifelse(dfDiD$year >= 1993, 1, 0)
dfDiD$cChildren = ifelse(dfDiD$children >= 1, 1, 0)
dfDiD.sub <- subset(dfDiD, work=="1")
mdlEarn <- earn ~ cChildren + dPeriod + cChildren:dPeriod
rsltOLSEarn <- lm(mdlEarn, data=dfDiD.sub)
mdlFinc <- finc ~ cChildren + dPeriod + cChildren:dPeriod
rsltOLSFinc <- lm(mdlFinc, data=dfDiD.sub)
mdlWork <- work ~ cChildren + dPeriod + cChildren:dPeriod
rsltOLSWork <- lm(mdlWork, data=dfDiD)
stargazer(rsltOLSEarn, rsltOLSFinc, rsltOLSWork,
intercept.bottom = FALSE, align = TRUE, no.space=TRUE, type="text")
mdl.control.earn <- earn ~ cChildren + dPeriod + cChildren:dPeriod + urate + unearn + children
rsltOLS.control.earn <- lm(mdl.control.earn, data=dfDiD.sub)
#Finc
mdl.control.finc <- finc ~ cChildren + dPeriod + cChildren:dPeriod + urate + unearn + children
rsltOLS.control.finc <- lm(mdl.control.finc, data=dfDiD.sub)
#Work
mdl.control.work <- work ~ cChildren + dPeriod + cChildren:dPeriod + urate + unearn + children
rsltOLS.control.work <- lm(mdl.control.work, data=dfDiD)
stargazer(rsltOLS.control.earn, rsltOLS.control.finc, rsltOLS.control.work,
intercept.bottom = FALSE, align = TRUE, no.space=TRUE, type="text")
rsltOLS.control.earn2 <- lm(mdl.control.earn, data=dfDiD.sub)
rsltOLS.control.finc2 <- lm(mdl.control.finc, data=dfDiD.sub)
rsltOLS.control.work2 <- lm(mdl.control.work, data=dfDiD)
par(mfrow=c(2,2))
plot(rsltOLS.control.earn2)
par(mfrow=c(0,1))
par(mfrow=c(,2))
ggplot(data = dfDiD.sub(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "SalePrice Fitted") +
labs(y = "Residuals") +
labs(caption = "Figure 2.1") +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold"))
ggplot(data = mdl.control.earn(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "SalePrice Fitted") +
labs(y = "Residuals") +
labs(caption = "Figure 2.1") +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold"))
rsltOLS.control.earn2 <- lm(mdl.control.earn, data=dfDiD.sub)
rsltOLS.control.finc2 <- lm(mdl.control.finc, data=dfDiD.sub)
rsltOLS.control.work2 <- lm(mdl.control.work, data=dfDiD)
ggplot(data = dfDiD.sub(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
ggplot(data = dfDiD.sub(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "SalePrice Fitted") +
labs(y = "Residuals") +
labs(caption = "Figure 2.1") +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold"))
ggplot(data = data.frame(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "SalePrice Fitted") +
labs(y = "Residuals") +
labs(caption = "Figure 2.1") +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold"))
ggplot(data = data.frame(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "SalePrice Fitted") +
labs(y = "Residuals") +
labs(caption = "Figure 2.1") +
theme(plot.caption =  element_text(hjust = 0.5, size = 12, face = "bold"))
ggplot(data = data.frame(fit = fitted(rsltOLS.control.earn2), rsid = residuals(rsltOLS.control.earn2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "Results OLS Fitted") +
labs(y = "Residuals")
ggplot(data = data.frame(fit = fitted(rsltOLS.control.finc2), rsid = residuals(rsltOLS.control.finc2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "Results OLS Fitted") +
labs(y = "Residuals")
ggplot(data = data.frame(fit = fitted(rsltOLS.control.work2), rsid = residuals(rsltOLS.control.work2)),
aes(fit, rsid)) +
geom_point() +
stat_smooth(se = F) +
theme_bw() +
labs(x = "Results OLS Fitted") +
labs(y = "Residuals")
lmtest::bptest(rsltOLS.control.earn2)
lmtest::bptest(rsltOLS.control.finc2)
rsltOLS.control.finc2 <- lm(mdl.control.finc, data=dfDiD.sub)
lmtest::bptest(rsltOLS.control.finc2)
lmtest::bptest(rsltOLS.control.work2)
View(dfDiD.sub)
View(dfDiD)
seBasic  <- sqrt(diag(vcov(rsltOLS.control.earn2 )))
seWhite  <- sqrt(diag(vcovHC(rsltOLS.control.earn2, type="HC0")))
seCluster <- sqrt (diag(vcov(rsltOLS.control.earn2, cluster="state")))
seWhite  <- sqrt(diag(vcovHC(rsltOLS.control.earn2, type="HC0")))
library(tidyverse)
seWhite  <- sqrt(diag(vcovHC(rsltOLS.control.earn2, type="HC0")))
library(sandwich)
seWhite  <- sqrt(diag(vcovHC(rsltOLS.control.earn2, type="HC0")))
seCluster <- sqrt (diag(vcov(rsltOLS.control.earn2, cluster="state")))
seCluster <- sqrt(diag(vcov(rsltOLS.control.earn2, cluster="state")))
stargazer(rsltOLS.control.earn2, rsltOLS.control.earn2, rsltOLS.control.earn2, se=list(seBasic, seWhite, seCluster), type="text")
seBasicFinc  <- sqrt(diag(vcov(rsltOLS.control.finc2)))
seWhiteFinc  <- sqrt(diag(vcovHC(rsltOLS.control.finc2, type="HC0")))
seClusterFinc <- sqrt(diag(vcov(rsltOLS.control.finc2, cluster="state")))
stargazer(rsltOLS.control.finc2, rsltOLS.control.finc2, rsltOLS.control.finc2, se=list(seBasicFinc, seWhiteFinc, seClusterFinc), type="text")
seBasicWork  <- sqrt(diag(vcov(rsltOLS.control.work2)))
seWhiteWork  <- sqrt(diag(vcovHC(rsltOLS.control.work2, type="HC0")))
seClusterWork <- sqrt(diag(vcov(rsltOLS.control.work2, cluster="state")))
stargazer(rsltOLS.control.work2, rsltOLS.control.work2, rsltOLS.control.work2, se=list(seBasicWork, seWhiteWork, seClusterWork), type="text")
summary(rsltOLS.control.work2 , modelIV ,align=TRUE , no.space=TRUE ,intercept.bottom = FALSE ,se = list(seBasicWork , seWhiteWork))
summary(rsltOLS.control.work2 , rsltOLS.control.work2 ,align=TRUE , no.space=TRUE ,intercept.bottom = FALSE ,se = list(seBasicWork , seWhiteWork))
seBasicEarn  <- sqrt(diag(vcov(rsltOLS.control.earn2)))
seWhiteEarn  <- sqrt(diag(vcovHC(rsltOLS.control.earn2, type="HC0")))
seClusterEarn <- sqrt(diag(vcov(rsltOLS.control.earn2, cluster="state")))
seWhiteEarn  <- sqrt(diag(vcovHC(rsltOLS.control.earn2, type="HC0")))
stargazer(rsltOLS.control.earn2, rsltOLS.control.earn2, rsltOLS.control.earn2,
se=list(seBasicEarn, seWhiteEarn, seClusterEarn), type="text")
stargazer(rsltOLS.control.finc2, rsltOLS.control.finc2, rsltOLS.control.finc2,
se=list(seBasicFinc, seWhiteFinc, seClusterFinc), type="text")
stargazer(rsltOLS.control.work2, rsltOLS.control.work2, rsltOLS.control.work2,
se=list(seBasicWork, seWhiteWork, seClusterWork), type="text")
library(multiwayvcov)
install.packages("multiwayvcov")
library(multiwayvcov)
seClusterEarn <- sqrt(diag(vcov(rsltOLS.control.earn2, cluster="state")))
stargazer(rsltOLS.control.earn2, rsltOLS.control.earn2, rsltOLS.control.earn2,
se=list(seBasicEarn, seWhiteEarn, seClusterEarn), type="text")
seClusterFinc <- sqrt(diag(vcov(rsltOLS.control.finc2, cluster="state")))
stargazer(rsltOLS.control.finc2, rsltOLS.control.finc2, rsltOLS.control.finc2,
se=list(seBasicFinc, seWhiteFinc, seClusterFinc), type="text")
seClusterWork <- sqrt(diag(vcov(rsltOLS.control.work2, cluster="state")))
stargazer(rsltOLS.control.work2, rsltOLS.control.work2, rsltOLS.control.work2,
se=list(seBasicWork, seWhiteWork, seClusterWork), type="text")
stargazer(rsltOLS.control.earn2, rsltOLS.control.earn2, rsltOLS.control.earn2,
control.finc2, rsltOLS.control.finc2, rsltOLS.control.finc2,
rsltOLS.control.work2, rsltOLS.control.work2, rsltOLS.control.work2,
se=list(seBasicEarn, seWhiteEarn, seClusterEarn,
seBasicFinc, seWhiteFinc, seClusterFinc,
seBasicWork, seWhiteWork, seClusterWork), type="text")
stargazer(rsltOLS.control.earn2, rsltOLS.control.earn2, rsltOLS.control.earn2,
rsltOLS.control.finc2, rsltOLS.control.finc2, rsltOLS.control.finc2,
rsltOLS.control.work2, rsltOLS.control.work2, rsltOLS.control.work2,
se=list(seBasicEarn, seWhiteEarn, seClusterEarn,
seBasicFinc, seWhiteFinc, seClusterFinc,
seBasicWork, seWhiteWork, seClusterWork), type="text")
stargazer(rsltOLS.control.earn2, rsltOLS.control.earn2, rsltOLS.control.earn2,
rsltOLS.control.finc2, rsltOLS.control.finc2, rsltOLS.control.finc2,
rsltOLS.control.work2, rsltOLS.control.work2, rsltOLS.control.work2,
se=list(seBasicEarn, seWhiteEarn, seClusterEarn,
seBasicFinc, seWhiteFinc, seClusterFinc,
seBasicWork, seWhiteWork, seClusterWork))
